# 서브쿼리

### 1. 스칼라 서브쿼리 

select에 위치

최종 반환하는 로우 수는 1개
최정 반환하는 컬럼이나 표현식도 1개 

서브쿼리에 별칭을 주는 것이 일반적이다. ( 하나의 컬럼 역할을 하므로) 

* 스칼라 서브쿼리는 성능상 좋지 않음, 따라서 과도한 사용은 자제 

### 2. 인라인 뷰

from에 위치

하나의 테이블 역할하는 select~from~where 구절로 만드는 것이다. 
여기서 where 절은 inner join 처럼 연결역할로 바깥에 써야하는게 기본이나, 
() 가로 구문 앞에 LATERAL을 쓴다면, WHERE 구문을 안쪽에 넣을 수 있다. 
* 단, where 조건절은 그 안에 있는 테이블을 사용할 수 있다. 
     한 마디로 다른 외부 테이블 where절은 불가능하여, lateral 써야한다는 것이다.  

이것 또한 별칭을 줘야만 한다. 


### 3. 중첩 서브쿼리 

where 절에 위치

서브쿼리가 조건 절의 일부로 사용됨.

서브쿼리 최종 반환 값과 메인쿼리 테이블의 특정 컬럼 값을 비교 시 사용
서브쿼리가 최종 반환하는 로우와 컬럼, 표현식 수는 1개 이상 가능
조건절의 일부이므로 서브쿼리에 대한 별칭 사용불가 

서브쿼리 내에서 메인쿼리와 조인 가능

in : 있는지?
exists : 존재하는지?


### 4. 세미 조인

두번째 테이블에 있는 로우와 조건이 맞는 첫 번째 테이블의 로우 반환
메인 쿼리와 중첩 서브쿼리를 사용할 때 사용하는 조인

where 절에서 exists연산자를 사용

ex) 
select * from departments a
where exists
(select 1 from employees b where a.department_id = b.department_id);


### 5. 안티조인

앞서 언급되었던 IN, EXISTS 앞에 NOT 을 붙여주는 부정문이다. 












